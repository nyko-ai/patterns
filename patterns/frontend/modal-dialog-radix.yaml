id: modal-dialog-radix
version: "1.0.0"
updated_at: "2026-01-31"
author: "nyko-team"
status: beta

name: "Modal Dialog with Radix UI"
description: "Accessible modal dialogs using Radix UI primitives"

category: frontend
tags:
  - modal
  - dialog
  - radix
  - ui
  - accessibility

difficulty: intermediate
time_estimate: "15-20 min"

stack:
  required:
    - name: "next"
      version: "^15.1.0"
      reason: "App Router with client components"
    - name: "@radix-ui/react-dialog"
      version: "^1.1.0"
      reason: "Accessible dialog primitive"

requires: []

enables: []

env_vars:
  required: []

external_setup: []

files:
  - path: "components/ui/dialog.tsx"
    action: create
    description: "Reusable dialog components"
    priority: 1

  - path: "components/ui/alert-dialog.tsx"
    action: create
    description: "Confirmation dialog component"
    priority: 2

  - path: "hooks/use-dialog.ts"
    action: create
    description: "Dialog state management hook"
    priority: 3

  - path: "components/examples/dialog-demo.tsx"
    action: create
    description: "Dialog usage examples"
    priority: 4

code:
  components/ui/dialog.tsx: |
    "use client";

    import * as React from "react";
    import * as DialogPrimitive from "@radix-ui/react-dialog";
    import { X } from "lucide-react";

    const Dialog = DialogPrimitive.Root;
    const DialogTrigger = DialogPrimitive.Trigger;
    const DialogPortal = DialogPrimitive.Portal;
    const DialogClose = DialogPrimitive.Close;

    const DialogOverlay = React.forwardRef<
      React.ElementRef<typeof DialogPrimitive.Overlay>,
      React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
    >(({ className, ...props }, ref) => (
      <DialogPrimitive.Overlay
        ref={ref}
        className={`fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 ${className || ""}`}
        {...props}
      />
    ));
    DialogOverlay.displayName = DialogPrimitive.Overlay.displayName;

    const DialogContent = React.forwardRef<
      React.ElementRef<typeof DialogPrimitive.Content>,
      React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content> & {
        /** Show close button */
        showClose?: boolean;
        /** Size variant */
        size?: "sm" | "md" | "lg" | "xl" | "full";
      }
    >(({ className, children, showClose = true, size = "md", ...props }, ref) => {
      const sizeClasses = {
        sm: "max-w-sm",
        md: "max-w-md",
        lg: "max-w-lg",
        xl: "max-w-xl",
        full: "max-w-[90vw] h-[90vh]",
      };

      return (
        <DialogPortal>
          <DialogOverlay />
          <DialogPrimitive.Content
            ref={ref}
            className={`fixed left-[50%] top-[50%] z-50 grid w-full ${sizeClasses[size]} translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:bg-gray-900 ${className || ""}`}
            {...props}
          >
            {children}
            {showClose && (
              <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-gray-100 dark:ring-offset-gray-950 dark:focus:ring-gray-800 dark:data-[state=open]:bg-gray-800">
                <X className="h-4 w-4" />
                <span className="sr-only">Close</span>
              </DialogPrimitive.Close>
            )}
          </DialogPrimitive.Content>
        </DialogPortal>
      );
    });
    DialogContent.displayName = DialogPrimitive.Content.displayName;

    const DialogHeader = ({
      className,
      ...props
    }: React.HTMLAttributes<HTMLDivElement>) => (
      <div
        className={`flex flex-col space-y-1.5 text-center sm:text-left ${className || ""}`}
        {...props}
      />
    );
    DialogHeader.displayName = "DialogHeader";

    const DialogFooter = ({
      className,
      ...props
    }: React.HTMLAttributes<HTMLDivElement>) => (
      <div
        className={`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 ${className || ""}`}
        {...props}
      />
    );
    DialogFooter.displayName = "DialogFooter";

    const DialogTitle = React.forwardRef<
      React.ElementRef<typeof DialogPrimitive.Title>,
      React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
    >(({ className, ...props }, ref) => (
      <DialogPrimitive.Title
        ref={ref}
        className={`text-lg font-semibold leading-none tracking-tight ${className || ""}`}
        {...props}
      />
    ));
    DialogTitle.displayName = DialogPrimitive.Title.displayName;

    const DialogDescription = React.forwardRef<
      React.ElementRef<typeof DialogPrimitive.Description>,
      React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
    >(({ className, ...props }, ref) => (
      <DialogPrimitive.Description
        ref={ref}
        className={`text-sm text-gray-500 dark:text-gray-400 ${className || ""}`}
        {...props}
      />
    ));
    DialogDescription.displayName = DialogPrimitive.Description.displayName;

    export {
      Dialog,
      DialogPortal,
      DialogOverlay,
      DialogClose,
      DialogTrigger,
      DialogContent,
      DialogHeader,
      DialogFooter,
      DialogTitle,
      DialogDescription,
    };

  components/ui/alert-dialog.tsx: |
    "use client";

    import * as React from "react";
    import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog";

    const AlertDialog = AlertDialogPrimitive.Root;
    const AlertDialogTrigger = AlertDialogPrimitive.Trigger;
    const AlertDialogPortal = AlertDialogPrimitive.Portal;

    const AlertDialogOverlay = React.forwardRef<
      React.ElementRef<typeof AlertDialogPrimitive.Overlay>,
      React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>
    >(({ className, ...props }, ref) => (
      <AlertDialogPrimitive.Overlay
        className={`fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 ${className || ""}`}
        {...props}
        ref={ref}
      />
    ));
    AlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName;

    const AlertDialogContent = React.forwardRef<
      React.ElementRef<typeof AlertDialogPrimitive.Content>,
      React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>
    >(({ className, ...props }, ref) => (
      <AlertDialogPortal>
        <AlertDialogOverlay />
        <AlertDialogPrimitive.Content
          ref={ref}
          className={`fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:bg-gray-900 ${className || ""}`}
          {...props}
        />
      </AlertDialogPortal>
    ));
    AlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName;

    const AlertDialogHeader = ({
      className,
      ...props
    }: React.HTMLAttributes<HTMLDivElement>) => (
      <div
        className={`flex flex-col space-y-2 text-center sm:text-left ${className || ""}`}
        {...props}
      />
    );
    AlertDialogHeader.displayName = "AlertDialogHeader";

    const AlertDialogFooter = ({
      className,
      ...props
    }: React.HTMLAttributes<HTMLDivElement>) => (
      <div
        className={`flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 ${className || ""}`}
        {...props}
      />
    );
    AlertDialogFooter.displayName = "AlertDialogFooter";

    const AlertDialogTitle = React.forwardRef<
      React.ElementRef<typeof AlertDialogPrimitive.Title>,
      React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>
    >(({ className, ...props }, ref) => (
      <AlertDialogPrimitive.Title
        ref={ref}
        className={`text-lg font-semibold ${className || ""}`}
        {...props}
      />
    ));
    AlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName;

    const AlertDialogDescription = React.forwardRef<
      React.ElementRef<typeof AlertDialogPrimitive.Description>,
      React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>
    >(({ className, ...props }, ref) => (
      <AlertDialogPrimitive.Description
        ref={ref}
        className={`text-sm text-gray-500 dark:text-gray-400 ${className || ""}`}
        {...props}
      />
    ));
    AlertDialogDescription.displayName =
      AlertDialogPrimitive.Description.displayName;

    const AlertDialogAction = React.forwardRef<
      React.ElementRef<typeof AlertDialogPrimitive.Action>,
      React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action> & {
        variant?: "default" | "destructive";
      }
    >(({ className, variant = "default", ...props }, ref) => {
      const variantClasses = {
        default: "bg-gray-900 text-white hover:bg-gray-800",
        destructive: "bg-red-600 text-white hover:bg-red-700",
      };

      return (
        <AlertDialogPrimitive.Action
          ref={ref}
          className={`inline-flex h-10 items-center justify-center rounded-md px-4 py-2 text-sm font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${variantClasses[variant]} ${className || ""}`}
          {...props}
        />
      );
    });
    AlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName;

    const AlertDialogCancel = React.forwardRef<
      React.ElementRef<typeof AlertDialogPrimitive.Cancel>,
      React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>
    >(({ className, ...props }, ref) => (
      <AlertDialogPrimitive.Cancel
        ref={ref}
        className={`mt-2 inline-flex h-10 items-center justify-center rounded-md border border-gray-200 bg-white px-4 py-2 text-sm font-semibold transition-colors hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-800 dark:bg-gray-950 dark:hover:bg-gray-800 sm:mt-0 ${className || ""}`}
        {...props}
      />
    ));
    AlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName;

    export {
      AlertDialog,
      AlertDialogPortal,
      AlertDialogOverlay,
      AlertDialogTrigger,
      AlertDialogContent,
      AlertDialogHeader,
      AlertDialogFooter,
      AlertDialogTitle,
      AlertDialogDescription,
      AlertDialogAction,
      AlertDialogCancel,
    };

  hooks/use-dialog.ts: |
    "use client";

    import { useState, useCallback } from "react";

    interface UseDialogOptions {
      /** Initial open state */
      defaultOpen?: boolean;
      /** Callback when dialog opens */
      onOpen?: () => void;
      /** Callback when dialog closes */
      onClose?: () => void;
    }

    /**
     * Hook for managing dialog state
     */
    export function useDialog(options: UseDialogOptions = {}) {
      const { defaultOpen = false, onOpen, onClose } = options;
      const [isOpen, setIsOpen] = useState(defaultOpen);

      const open = useCallback(() => {
        setIsOpen(true);
        onOpen?.();
      }, [onOpen]);

      const close = useCallback(() => {
        setIsOpen(false);
        onClose?.();
      }, [onClose]);

      const toggle = useCallback(() => {
        setIsOpen((prev) => {
          const next = !prev;
          if (next) {
            onOpen?.();
          } else {
            onClose?.();
          }
          return next;
        });
      }, [onOpen, onClose]);

      return {
        isOpen,
        open,
        close,
        toggle,
        setIsOpen,
      };
    }

    /**
     * Hook for confirmation dialogs
     */
    export function useConfirmDialog<T = void>() {
      const [isOpen, setIsOpen] = useState(false);
      const [resolveRef, setResolveRef] = useState<{
        resolve: (value: boolean) => void;
        data?: T;
      } | null>(null);

      const confirm = useCallback((data?: T): Promise<boolean> => {
        return new Promise((resolve) => {
          setResolveRef({ resolve, data });
          setIsOpen(true);
        });
      }, []);

      const handleConfirm = useCallback(() => {
        resolveRef?.resolve(true);
        setIsOpen(false);
        setResolveRef(null);
      }, [resolveRef]);

      const handleCancel = useCallback(() => {
        resolveRef?.resolve(false);
        setIsOpen(false);
        setResolveRef(null);
      }, [resolveRef]);

      return {
        isOpen,
        data: resolveRef?.data,
        confirm,
        handleConfirm,
        handleCancel,
      };
    }

  components/examples/dialog-demo.tsx: |
    "use client";

    import { useState } from "react";
    import {
      Dialog,
      DialogContent,
      DialogDescription,
      DialogFooter,
      DialogHeader,
      DialogTitle,
      DialogTrigger,
      DialogClose,
    } from "@/components/ui/dialog";
    import {
      AlertDialog,
      AlertDialogAction,
      AlertDialogCancel,
      AlertDialogContent,
      AlertDialogDescription,
      AlertDialogFooter,
      AlertDialogHeader,
      AlertDialogTitle,
      AlertDialogTrigger,
    } from "@/components/ui/alert-dialog";
    import { useDialog, useConfirmDialog } from "@/hooks/use-dialog";

    export function DialogDemo() {
      const editDialog = useDialog();
      const deleteConfirm = useConfirmDialog<{ id: string; name: string }>();
      const [items, setItems] = useState([
        { id: "1", name: "Item 1" },
        { id: "2", name: "Item 2" },
      ]);

      const handleDelete = async (item: { id: string; name: string }) => {
        const confirmed = await deleteConfirm.confirm(item);
        if (confirmed) {
          setItems((prev) => prev.filter((i) => i.id !== item.id));
        }
      };

      return (
        <div className="space-y-8 p-4">
          {/* Basic Dialog */}
          <section>
            <h2 className="text-xl font-bold mb-4">Basic Dialog</h2>
            <Dialog>
              <DialogTrigger asChild>
                <button className="px-4 py-2 bg-blue-500 text-white rounded">
                  Open Dialog
                </button>
              </DialogTrigger>
              <DialogContent>
                <DialogHeader>
                  <DialogTitle>Edit Profile</DialogTitle>
                  <DialogDescription>
                    Make changes to your profile here. Click save when you're done.
                  </DialogDescription>
                </DialogHeader>
                <div className="py-4">
                  <input
                    type="text"
                    placeholder="Name"
                    className="w-full border rounded px-3 py-2"
                  />
                </div>
                <DialogFooter>
                  <DialogClose asChild>
                    <button className="px-4 py-2 border rounded">Cancel</button>
                  </DialogClose>
                  <button className="px-4 py-2 bg-blue-500 text-white rounded">
                    Save
                  </button>
                </DialogFooter>
              </DialogContent>
            </Dialog>
          </section>

          {/* Controlled Dialog */}
          <section>
            <h2 className="text-xl font-bold mb-4">Controlled Dialog</h2>
            <button
              onClick={editDialog.open}
              className="px-4 py-2 bg-green-500 text-white rounded"
            >
              Edit (Controlled)
            </button>
            <Dialog open={editDialog.isOpen} onOpenChange={editDialog.setIsOpen}>
              <DialogContent>
                <DialogHeader>
                  <DialogTitle>Controlled Dialog</DialogTitle>
                  <DialogDescription>
                    This dialog is controlled programmatically.
                  </DialogDescription>
                </DialogHeader>
                <DialogFooter>
                  <button
                    onClick={editDialog.close}
                    className="px-4 py-2 border rounded"
                  >
                    Close
                  </button>
                </DialogFooter>
              </DialogContent>
            </Dialog>
          </section>

          {/* Alert Dialog with Confirmation */}
          <section>
            <h2 className="text-xl font-bold mb-4">Delete Confirmation</h2>
            <div className="space-y-2">
              {items.map((item) => (
                <div
                  key={item.id}
                  className="flex items-center justify-between border p-2 rounded"
                >
                  <span>{item.name}</span>
                  <button
                    onClick={() => handleDelete(item)}
                    className="px-3 py-1 bg-red-500 text-white rounded text-sm"
                  >
                    Delete
                  </button>
                </div>
              ))}
            </div>

            <AlertDialog
              open={deleteConfirm.isOpen}
              onOpenChange={(open) => !open && deleteConfirm.handleCancel()}
            >
              <AlertDialogContent>
                <AlertDialogHeader>
                  <AlertDialogTitle>Are you sure?</AlertDialogTitle>
                  <AlertDialogDescription>
                    This will permanently delete "{deleteConfirm.data?.name}".
                    This action cannot be undone.
                  </AlertDialogDescription>
                </AlertDialogHeader>
                <AlertDialogFooter>
                  <AlertDialogCancel onClick={deleteConfirm.handleCancel}>
                    Cancel
                  </AlertDialogCancel>
                  <AlertDialogAction
                    variant="destructive"
                    onClick={deleteConfirm.handleConfirm}
                  >
                    Delete
                  </AlertDialogAction>
                </AlertDialogFooter>
              </AlertDialogContent>
            </AlertDialog>
          </section>
        </div>
      );
    }

edge_cases:
  - id: focus-trap
    symptom: "Focus escapes dialog when tabbing"
    cause: "Focus trap not working correctly"
    solution: |
      Radix handles focus trap automatically. If issues persist:
      1. Ensure DialogContent is the direct child of Dialog
      2. Don't use portal: false
      3. Check for z-index conflicts

  - id: scroll-lock
    symptom: "Background scrolling when dialog open"
    cause: "Scroll lock not applied"
    solution: |
      Radix handles scroll lock by default.
      If using custom portal:
      <Dialog modal={true}>
        ...
      </Dialog>

  - id: animation-flash
    symptom: "Dialog flashes on close"
    cause: "Missing exit animation"
    solution: |
      Ensure animate-out classes are applied:
      data-[state=closed]:animate-out
      data-[state=closed]:fade-out-0

  - id: nested-dialogs
    symptom: "Nested dialogs not working"
    cause: "Multiple portals conflicting"
    solution: |
      Use proper nesting with separate Dialog roots:
      <Dialog>
        <DialogContent>
          <Dialog>
            <DialogTrigger>Open Nested</DialogTrigger>
            <DialogContent>Nested content</DialogContent>
          </Dialog>
        </DialogContent>
      </Dialog>

validation:
  manual_test:
    - "Install @radix-ui/react-dialog"
    - "Create Dialog component"
    - "Open dialog - verify overlay and content appear"
    - "Press Escape - verify dialog closes"
    - "Click outside - verify dialog closes"
    - "Tab through - verify focus stays in dialog"
    - "Test on mobile - verify touch works"
    - "Test with screen reader - verify announcements"
